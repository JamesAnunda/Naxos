(window.webpackJsonpnaxos=window.webpackJsonpnaxos||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/alert.77e4ae16.mp3"},28:function(e,t,a){e.exports=a(61)},34:function(e,t,a){},46:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(15),c=a.n(i),l=(a(33),a(34),a(3)),s=a(4),r=a(7),u=a(5),d=a(8),p=a(6),m=a(9),h=a(19),b=a.n(h);a(42),a(44);b.a.initializeApp({apiKey:"AIzaSyAfNxiNd6gBt1nQkGZI1voCdqbAoWVx0l0",authDomain:"naxos-8cc1b.firebaseapp.com",databaseURL:"https://naxos-8cc1b.firebaseio.com",projectId:"naxos-8cc1b",storageBucket:"naxos-8cc1b.appspot.com",messagingSenderId:"243731443194",appId:"1:243731443194:web:e8c613e57b720f59adc843"});var g=b.a.auth(),f=b.a,v=(a(46),a(12)),w=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.authAnon;return o.a.createElement("div",{className:"wrapper loginContainer p-4"},o.a.createElement("div",{className:"container h-100 "},o.a.createElement("div",{className:"row h-100 justify-content-center align-items-center d-flex flex-column"},o.a.createElement("h1",{className:"bg-dark text-center text-light p-2 rounded text-uppercase mb-4 w-100"},"Naxos",o.a.createElement(v.a,{icon:"heartbeat",size:"1x",className:"ml-4"})),o.a.createElement("div",{className:"jumbotron bg-light w-100"},o.a.createElement("p",{className:"text-center pt-2 font-weight-bold"},"Naxos is an application that links overdose victims together with carriers of the drug Naloxone.  This app may be used when there is an overdose victim and the community can be called on to help. Carriers of Naxolone can sign up to be notified whenever there is an overdose victim that uses this app to call for help.")),o.a.createElement("button",{className:"btn btn-info font-weight-bold text-uppercase w-100 p-3",onClick:e},"Log In Anonymously"))))}}]),t}(n.Component),O=a(18),j=a.n(O),x=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){new Audio(j.a).play()}},{key:"render",value:function(){return o.a.createElement("div",{className:"p-4"},o.a.createElement("button",{className:"btn btn-danger font-weight-bold text-uppercase w-100"},"Assist Victim"))}}]),t}(o.a.Component),E=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).state={help:null},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({help:1})}},{key:"render",value:function(){var e=this.props,t=e.lat,a=e.lng;return o.a.createElement("div",{className:"p-4"},t,"  ",a,this.state.help&&o.a.createElement(x,null))}}]),t}(n.Component),y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).state={},e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"navigate",value:function(e){e.preventDefault();var t=e.target.id;Object(m.b)("/"+t)}},{key:"render",value:function(){return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"container-fluid h-100 d-flex flex-column align-items-center m-0 p-0 bg-warning"},o.a.createElement("h2",{className:"bg-info text-center text-light p-4 text-uppercase m-0 w-100"},"Choose your role"),o.a.createElement("div",{className:"d-flex bg-light h-50 w-100 p-4"},o.a.createElement("div",{className:"align-self-center mx-auto"},o.a.createElement("h4",{className:"text-center"},"There is an overdose victim and I need assistance"),o.a.createElement("button",{id:"HelpWaiting",className:"btn btn-danger font-weight-bold text-uppercase w-100 p-4 mt-2",onClick:this.navigate},"Send Help"))),o.a.createElement("div",{className:"d-flex bg-light h-50 w-100 p-4 border-top"},o.a.createElement("div",{className:"align-self-center  mx-auto"},o.a.createElement("h4",{className:"text-center"},"I possess Naloxone and am able to offer assistance"),o.a.createElement("button",{id:"Helper",className:"btn btn-warning font-weight-bold text-uppercase w-100 p-4 mt-2",onClick:this.navigate},"Offer Help")))))}}]),t}(n.Component),k=a(27),N=a.n(k),D=new Audio(j.a),L=f.database().ref("overdose"),C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).state={help:!1,audio:0,odObj:""},e.toggleSwitch=e.toggleSwitch.bind(Object(d.a)(e)),e.updateAudio=e.updateAudio.bind(Object(d.a)(e)),e.silence=e.silence.bind(Object(d.a)(e)),e.getData=e.getData.bind(Object(d.a)(e)),e.navigate=e.navigate.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"toggleSwitch",value:function(e){e.preventDefault(),this.setState({help:!this.state.help}),this.state.help||D.play()}},{key:"getData",value:function(){var e=this;L.orderByChild("od").limitToLast(1).equalTo(1).on("child_added",(function(t,a){var n=t.val(),o=t.key,i=n.lat,c=n.lng,l=N()({lat:e.props.lat,lon:e.props.lng},{lat:i,lon:c}),s={userID:o,odLat:i,odLng:c,dist:l};l<=100&&(e.setState({odObj:s,help:!0}),D.play())}))}},{key:"updateAudio",value:function(e){e.preventDefault(),D.play()}},{key:"silence",value:function(){D.pause(),D.currentTime=0,this.setState({audio:0,help:!1})}},{key:"navigate",value:function(e){e.preventDefault();var t=e.target.id;"ShowLocation"===t?(console.log(this.state.odObj.lat),Object(m.b)("/ShowLocation/".concat(this.state.odObj.odLat,"/").concat(this.state.odObj.odLng,"/").concat(this.state.odObj.userID))):Object(m.b)("/"+t)}},{key:"componentDidMount",value:function(){this.props.lat&&(D.addEventListener("ended",this.updateAudio),this.getData())}},{key:"componentWillUnmount",value:function(){D.removeEventListener("ended",this.updateAudio),this.setState({help:!1,odObj:"",mounted:!1})}},{key:"render",value:function(){var e=this.props,t=e.lat,a=e.lng,n=this.state.help;return o.a.createElement("div",{className:"p-0 m-0 wrapper ".concat(!0===n?"bgFlash":"")},!0===n?o.a.createElement("div",{className:"d-flex h-100 w-100 p-4 m-0"},o.a.createElement("div",{className:"align-self-center mx-auto"},o.a.createElement("h4",{className:"text-center text-uppercase font-weight-bold mb-4"},"A victim is in need of help ",this.state.odObj.dist," miles away!"),o.a.createElement("button",{id:"ShowLocation",className:"btn btn-danger font-weight-bold text-uppercase w-100 p-4 mt-2",onClick:this.navigate},"Assist Victim"),o.a.createElement("button",{className:"btn btn-dark font-weight-bold text-uppercase w-100 p-3 mt-4",onClick:this.silence},"Silence Alert"))):o.a.createElement("div",{className:"d-flex  h-100 w-100 p-4 m-0"},o.a.createElement("div",{className:"align-self-center mx-auto"},o.a.createElement("button",{onClick:this.toggleSwitch,className:"btn btn-secondary"},"Toggle"),o.a.createElement("p",null,t,"  ",a),o.a.createElement("h3",{className:"text-center text-uppercase font-weight-bold mb-4"},"On standby for overdose victims"),o.a.createElement(v.a,{icon:"heart",size:"1x",className:"heart text-danger text-center w-100 my-4"}),o.a.createElement("button",{id:"Role",className:"btn btn-dark font-weight-bold text-uppercase w-100 p-4 mt-4",onClick:this.navigate},"Go Back"))))}}]),t}(n.Component),A=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).writeUserData=function(e,t,a){f.database().ref("overdose/"+e).set({lat:t,lng:a,od:1})},e.state={},e.navigate=e.navigate.bind(Object(d.a)(e)),e.writeUserData=e.writeUserData.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.writeUserData(this.props.userID,this.props.lat,this.props.lng)}},{key:"navigate",value:function(e){e.preventDefault();var t=e.target.id;Object(m.b)("/"+t)}},{key:"render",value:function(){return o.a.createElement("div",{className:"p-0 m-0 wrapper"},o.a.createElement("div",{className:"d-flex  h-100 w-100 p-4 m-0"},o.a.createElement("div",{className:"align-self-center mx-auto"},o.a.createElement("h2",{className:"text-center text-uppercase font-weight-bold mb-4"},"Help is on the way!"),o.a.createElement(v.a,{icon:"ambulance",size:"10x",className:"text-danger text-center w-100 my-4"}),o.a.createElement("button",{id:"Role",className:"btn btn-dark font-weight-bold text-uppercase w-100 p-4 mt-4",onClick:this.navigate},"Go Back"))))}}]),t}(n.Component),S=a(11),I={width:"100%",height:"50%"},M=function(e){function t(){return Object(l.a)(this,t),Object(r.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.lat,a=e.lng,n=e.odLat,i=e.odLng;return o.a.createElement(S.Map,{google:this.props.google,zoom:12,style:I,initialCenter:{lat:t,lng:a}},o.a.createElement(S.Marker,{name:"Your Location",position:{lat:t,lng:a}}),o.a.createElement(S.Marker,null),o.a.createElement(S.Marker,{name:"Overdose Location",position:{lat:n,lng:i},icon:"http://maps.google.com/mapfiles/ms/icons/yellow-dot.png",size:5}),o.a.createElement(S.Marker,null))}}]),t}(n.Component),U=Object(S.GoogleApiWrapper)({apiKey:"AIzaSyA7-EGQyZ2kJdH0ldCzxt3-aTS5jpa8OY8"})(M),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).writeUserData=function(e){f.database().ref("overdose/"+e).update({od:0})},e.state={},e.navigate=e.navigate.bind(Object(d.a)(e)),e.mapsSelector=e.mapsSelector.bind(Object(d.a)(e)),e.writeUserData=e.writeUserData.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.writeUserData(this.props.odUserID)}},{key:"navigate",value:function(e){e.preventDefault();var t=e.target.id;Object(m.b)("/"+t)}},{key:"mapsSelector",value:function(){-1!==navigator.platform.indexOf("iPhone")||-1!==navigator.platform.indexOf("iPad")||-1!==navigator.platform.indexOf("iPod")?window.open("maps://maps.google.com/maps?daddr=".concat(this.props.odLat,",").concat(this.props.odLng,">&amp;ll=")):window.open("https://maps.google.com/maps?daddr=".concat(this.props.odLat,",").concat(this.props.odLng,"&amp;ll="))}},{key:"render",value:function(){var e=this.props,t=e.lat,a=e.lng,n=e.odLat,i=e.odLng;return o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"container-fluid h-100 d-flex flex-column align-items-center m-0 p-0 bg-warning"},o.a.createElement("div",{className:"d-flex bg-light h-50 w-100 p-0 m-0"},t&&o.a.createElement(U,{lat:t,lng:a,odLat:n,odLng:i})),o.a.createElement("div",{className:"d-flex bg-light h-50 w-100 p-4 border-top"},o.a.createElement("div",{className:"align-self-center  mx-auto"},o.a.createElement("h4",{className:"text-center text-uppercase font-weight-bold mb-2"},"The yellow marker is the overdose victim"),o.a.createElement("button",{id:"Helper",className:"btn btn-warning font-weight-bold text-uppercase w-100 p-4 mt-2 above",onClick:this.mapsSelector},"Get Directions"),o.a.createElement("button",{id:"Role",className:"btn btn-dark font-weight-bold text-uppercase w-100 p-4 mt-4 above",onClick:this.navigate},"Go Back")))))}}]),t}(n.Component),P=a(16),z=a(17);P.b.add(z.c,z.d,z.b,z.a);var W=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(r.a)(this,Object(u.a)(t).call(this))).writeUserData=function(e,t,a,n){f.database().ref("users/"+e).set({username:t,email:a,profile_picture:n})},e.addMeeting=function(t){f.database().ref("meetings/".concat(e.state.user.uid)).push({meetingName:t})},e.state={user:null,lat:null,lng:null,userID:null},e.authPhone=e.authPhone.bind(Object(d.a)(e)),e}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentWillUnmount",value:function(){this.setState({lat:null,lng:null})}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation.watchPosition((function(t){e.setState({lat:t.coords.latitude,lng:t.coords.longitude})}),(function(e){return console.log(e)})),g.onAuthStateChanged((function(t){t?(e.setState({user:t,userID:t.uid}),console.log("logged in"),console.log(t.uid),Object(m.b)("/Role")):(console.log("logged out"),Object(m.b)("/"))})),g.setPersistence(f.auth.Auth.Persistence.LOCAL).then((function(){})).catch((function(e){}))}},{key:"authPhone",value:function(){var e=this.state.phone,t=window.recaptchaVerifier;f.auth().signInWithPhoneNumber(e,t).then((function(e){console.log("success"),console.log(e);e.confirm("123463").then((function(e){var t=e.user;console.log(t)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log("nope error"),console.log(e)}))}},{key:"authAnon",value:function(){f.auth().signInAnonymously().catch((function(e){}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(m.a,null,o.a.createElement(w,{path:"/",authAnon:this.authAnon}),o.a.createElement(E,{path:"/Home",lat:this.state.lat,lng:this.state.lng}),o.a.createElement(C,{path:"/Helper",lat:this.state.lat,lng:this.state.lng}),o.a.createElement(A,{path:"/HelpWaiting",lat:this.state.lat,lng:this.state.lng,userID:this.state.userID}),o.a.createElement(H,{path:"/ShowLocation/:odLat/:odLng/:odUserID",lat:this.state.lat,lng:this.state.lng}),o.a.createElement(y,{path:"/Role"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[28,1,2]]]);
//# sourceMappingURL=main.34d60c51.chunk.js.map