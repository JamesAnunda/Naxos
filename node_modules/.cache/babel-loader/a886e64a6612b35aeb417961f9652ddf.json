{"ast":null,"code":"import _classCallCheck from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/kirkhoey/Desktop/Naxos/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Router,navigate}from'@reach/router';import Firebase,{auth}from'./Firebase';import'./App.css';import Login from'./Login';import Home from'./Home';import Role from'./Role';import Helper from'./Helper';import{library}from'@fortawesome/fontawesome-svg-core';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faHeartbeat,faSpinner,faHeart}from'@fortawesome/free-solid-svg-icons';library.add(faHeartbeat,faSpinner,faHeart);var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.writeUserData=function(userId,name,email,imageUrl){Firebase.database().ref('users/'+userId).set({username:name,email:email,profile_picture:imageUrl});};_this.addMeeting=function(meetingName){var ref=Firebase.database().ref(\"meetings/\".concat(_this.state.user.uid));ref.push({meetingName:meetingName});};_this.state={user:null,phone:\"+15555555555\",lat:null,lng:null};_this.authPhone=_this.authPhone.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.setState({lat:null,lng:null});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// navigator.geolocation.getCurrentPosition(position => {\n//   this.setState({ lat: position.coords.latitude, lng: position.coords.longitude });\n// }, err => console.log(err)\n// );\nnavigator.geolocation.watchPosition(function(position){_this2.setState({lat:position.coords.latitude,lng:position.coords.longitude});},function(err){return console.log(err);});auth.onAuthStateChanged(function(user){if(user){_this2.setState({user:user});console.log('logged in');console.log(user.uid);navigate('/Helper');}else{console.log('logged out');navigate('/Helper');}});auth.setPersistence(Firebase.auth.Auth.Persistence.NONE).then(function(){// Existing and future Auth states are now persisted in the current\n// session only. Closing the window would clear any existing state even\n// if a user forgets to sign out.\n// ...\n// New sign-in will be persisted with session persistence.\n//return Firebase.auth().signInWithEmailAndPassword(email, password);\n}).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;});}},{key:\"authPhone\",value:function authPhone(){var phoneNumber=this.state.phone;var appVerifier=window.recaptchaVerifier;Firebase.auth().signInWithPhoneNumber(phoneNumber,appVerifier).then(function(confirmResult){console.log(\"success\");console.log(confirmResult);// success\n//var code = getCodeFromUserInput();\nvar code=\"123463\";confirmResult.confirm(code).then(function(result){// User signed in successfully.\nvar user=result.user;console.log(user);// ...\n}).catch(function(error){// User couldn't sign in (bad verification code?)\n// ...\nconsole.log(error);});}).catch(function(error){// error\nconsole.log('nope error');console.log(error);});}},{key:\"authAnon\",value:function authAnon(){Firebase.auth().signInAnonymously().catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// ...\n});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(Router,null,React.createElement(Login,{path:\"/\",authAnon:this.authAnon}),React.createElement(Home,{path:\"/Home\",lat:this.state.lat,lng:this.state.lng}),React.createElement(Helper,{path:\"/Helper\",lat:this.state.lat,lng:this.state.lng}),React.createElement(Role,{path:\"/Role\"})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["/Users/kirkhoey/Desktop/Naxos/src/App.js"],"names":["React","Component","Router","navigate","Firebase","auth","Login","Home","Role","Helper","library","FontAwesomeIcon","faHeartbeat","faSpinner","faHeart","add","App","writeUserData","userId","name","email","imageUrl","database","ref","set","username","profile_picture","addMeeting","meetingName","state","user","uid","push","phone","lat","lng","authPhone","bind","setState","navigator","geolocation","watchPosition","position","coords","latitude","longitude","err","console","log","onAuthStateChanged","setPersistence","Auth","Persistence","NONE","then","catch","error","errorCode","code","errorMessage","message","phoneNumber","appVerifier","window","recaptchaVerifier","signInWithPhoneNumber","confirmResult","confirm","result","signInAnonymously","authAnon"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { Router, navigate } from '@reach/router';\nimport Firebase, {auth} from './Firebase';\nimport './App.css';\n\nimport Login from './Login';\nimport Home from './Home';\nimport Role from './Role';\nimport Helper from './Helper';\n\n\nimport { library } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faHeartbeat, faSpinner, faHeart} from '@fortawesome/free-solid-svg-icons';\n\nlibrary.add(faHeartbeat, faSpinner, faHeart);\n\n\n\n\n\n\nclass App extends Component {\n\n\n  constructor() {\n    super();\n    this.state = {\n      user: null,\n      phone: \"+15555555555\",\n      lat: null,\n      lng: null\n    };\n\n\n    this.authPhone = this.authPhone.bind(this);\n  }\n   \n\ncomponentWillUnmount(){\n  this.setState({ lat: null, lng: null })\n}\n\ncomponentDidMount () {\n\n\n  // navigator.geolocation.getCurrentPosition(position => {\n  //   this.setState({ lat: position.coords.latitude, lng: position.coords.longitude });\n  // }, err => console.log(err)\n  // );\n\n  navigator.geolocation.watchPosition( position=> {\n    this.setState({ lat: position.coords.latitude, lng: position.coords.longitude });\n  }, err => console.log(err)\n  );\n\n\n    auth.onAuthStateChanged((user) => {\n      if (user) {\n         this.setState({user})\n         console.log('logged in');\n         console.log(user.uid);\n         navigate('/Helper');\n      } else{\n        console.log('logged out');\n        navigate('/Helper');\n      }\n  });\n  \n\n\n\n  auth.setPersistence(Firebase.auth.Auth.Persistence.NONE)\n  .then(function() {\n    // Existing and future Auth states are now persisted in the current\n    // session only. Closing the window would clear any existing state even\n    // if a user forgets to sign out.\n    // ...\n    // New sign-in will be persisted with session persistence.\n    //return Firebase.auth().signInWithEmailAndPassword(email, password);\n  })\n  .catch(function(error) {\n    // Handle Errors here.\n    var errorCode = error.code;\n    var errorMessage = error.message;\n  });\n  \n}\n\n\n\nauthPhone() {\n    const phoneNumber = this.state.phone;\n    const appVerifier = window.recaptchaVerifier;\n    Firebase\n    .auth()\n    .signInWithPhoneNumber(phoneNumber, appVerifier)\n    .then(confirmResult => {\n      console.log(\"success\");\n      console.log(confirmResult);\n      // success\n\n        //var code = getCodeFromUserInput();\n        var code = \"123463\";\n        confirmResult.confirm(code).then(function (result) {\n          // User signed in successfully.\n          var user = result.user;\n          console.log(user);\n          // ...\n        }).catch(function (error) {\n          // User couldn't sign in (bad verification code?)\n          // ...\n          console.log(error);\n        });\n    })\n    .catch(error => {\n      // error\n      console.log('nope error');\n      console.log(error);\n    });\n}\n\nauthAnon() { \nFirebase.auth().signInAnonymously().catch(function(error) {\n  // Handle Errors here.\n  var errorCode = error.code;\n  var errorMessage = error.message;\n  // ...\n});\n};\n\n\n\n  writeUserData = (userId, name, email, imageUrl) =>{\n    Firebase.database().ref('users/' + userId).set({\n      username: name,\n      email: email,\n      profile_picture : imageUrl\n    });\n  };\n\n  addMeeting = meetingName => {\n    const ref = Firebase\n      .database()\n      .ref(`meetings/${this.state.user.uid}`);\n    ref.push({ meetingName: meetingName });\n  };\n\n  \n\n\n  render(){\n\n\n  return (\n\n\n<div>\n<Router>\n  <Login path='/' authAnon={this.authAnon} />\n  <Home path='/Home' lat={this.state.lat} lng={this.state.lng}/>\n  <Helper path='/Helper' lat={this.state.lat} lng={this.state.lng}/>\n  <Role path='/Role'/>\n</Router>\n\n\n</div>\n  );\n}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}